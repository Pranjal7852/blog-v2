<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Know your user like never before using Navigator API | Pranjal's Blog</title><meta name=keywords content="web-performance,javascript,web-vitals"><meta name=description content="‚ö° TL;DR A comprehensive guide to leveraging the Navigator API for collecting crucial user environment metrics like CPU heap size, RAM, network speed, and device info to enhance error tracking and performance monitoring in web applications."><meta name=author content><link rel=canonical href=http://localhost:1313/posts/navigator-api/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/webxsx.png><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/navigator-api/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/posts/navigator-api/"><meta property="og:site_name" content="Pranjal's Blog"><meta property="og:title" content="Know your user like never before using Navigator API"><meta property="og:description" content="‚ö° TL;DR A comprehensive guide to leveraging the Navigator API for collecting crucial user environment metrics like CPU heap size, RAM, network speed, and device info to enhance error tracking and performance monitoring in web applications."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-08-08T14:53:12+05:30"><meta property="article:modified_time" content="2024-08-08T14:53:12+05:30"><meta property="article:tag" content="Web-Performance"><meta property="article:tag" content="Javascript"><meta property="article:tag" content="Web-Vitals"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Know your user like never before using Navigator API"><meta name=twitter:description content="‚ö° TL;DR A comprehensive guide to leveraging the Navigator API for collecting crucial user environment metrics like CPU heap size, RAM, network speed, and device info to enhance error tracking and performance monitoring in web applications."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Know your user like never before using Navigator API","item":"http://localhost:1313/posts/navigator-api/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Know your user like never before using Navigator API","name":"Know your user like never before using Navigator API","description":"‚ö° TL;DR A comprehensive guide to leveraging the Navigator API for collecting crucial user environment metrics like CPU heap size, RAM, network speed, and device info to enhance error tracking and performance monitoring in web applications.","keywords":["web-performance","javascript","web-vitals"],"articleBody":"Navigator API - More than meets the Eye For those who don‚Äôt know, the Navigator API is a native API available in all browsers that provides user-centric metrics for your website. It offers insights into how your high-value site is performing. Some may use it to customize the interface for different platforms, such as displaying premium items to iOS users, but its main purpose is to understand how your code behaves across different user environments and internet speeds, including ping. This helps developers diagnose and recreate issues to solve them more effectively. The Navigator API also provides CPU heap statistics, which reveal how CSS effects impact users‚Äô CPU threads.\nBy now, you might have a better understanding of what the Navigator API is and why it‚Äôs valuable. Let‚Äôs see how to incorporate it into your million dollar web app.\nFor practical use‚Äîspecifically the task I was assigned‚Äîwe use Sentry for our app, which does an excellent job tracking errors. However, knowing about an error is only part of the story; additional information is crucial for effective troubleshooting. Key statistics like network speed at the time of the error, heap size, or RAM usage on the device are needed.\nLet‚Äôs address the key aspects one by one:\nEnvironment/Model - navigator.userAgent This is the most crucial information. It reveals details about the operating system on which the web page is being viewed, as well as key information about the manufacturer, platform, and web view version.\nconst userAgent = navigator.userAgent; console.log(userAgent); //console output // { // \"isVirtual\": false, // \"manufacturer\": \"Google Inc.\", // \"model\": \"Macintosh\", // \"operatingSystem\": \"mac\", // \"osVersion\": \"10.15.7\", // \"platform\": \"web\", // \"webViewVersion\": \"127.0.0.0\" // }, CPU heap Size - `` The memory heap is the portion of memory allocated to the JavaScript runtime to store all objects, strings, and data structures. In simple terms, the more memory allocated, the more processing power your processor will need to handle the calculations and data management.\nconst userCPUHeap = performance.memory; console.log(userCPUHeap); //console output // { // \"totalJSHeapSize\": 124342323 Bytes, // \"totalJSHeapSize\": 66605138 Bytes, // \"usedJSHeapSize\": 51178854 Bytes, // }, RAM This gives the at-least physical hardware RAM memory in GB of the user machine. Unlike JS heap size it value is is in range [2,3,4,8]. For devices greater than 8 this method with return 8 .\nconst userPhysicalRAM = navigator.deviceMemory; console.log(userPhysicalRAM); //console output // { // RAM: 8 // } Network Stats If you want to measure the user‚Äôs network speed while loading your website, this is a key statistic for tracking and monitoring your web vitals based on the user‚Äôs average network speed. While one method is to download a test file of known size and measure the time taken for the operation, this approach can increase the app size and waste user resources.\nconst networkInfo = \"connection\" in navigator ? navigator.connection || navigator.mozConnection || navigator.webkitConnection : null; const userNetworkInfo = { effectiveType: networkInfo ? networkInfo.effectiveType : \"Not available\", downlink: networkInfo ? networkInfo.downlink : \"Not available\", rtt: networkInfo ? networkInfo.rtt : \"Not available\", }; console.log(userNetworkInfo); // Example console output // { // effectiveType: '4g', Network Type of user Wifi or Band // downlink: 10, This is the avg Speed calculated by Chrome // rtt: 50 // } The downlink field provides the approximate bandwidth of the client‚Äôs connection to the server, measured in Mbps, while the RTT field estimates the round-trip time in milliseconds (ms) for the network.\nFor practical purposes, these metrics are essential for tracking user performance. Remember to append this data to your Mixpanel events for comprehensive data analytics which we did in our systems.\nAlert üçé (For Apple enthusiasts): Due to privacy constraints, some API endpoints are not supported by Safari. This means you won‚Äôt be able to obtain certain information, such as network speed, RAM, or CPU heap size, as of now. Good luck with that! üòä\n","wordCount":"641","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-08-08T14:53:12+05:30","dateModified":"2024-08-08T14:53:12+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/navigator-api/"},"publisher":{"@type":"Organization","name":"Pranjal's Blog","logo":{"@type":"ImageObject","url":"http://localhost:1313/webxsx.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Pranjal's Blog (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>Pranjal's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/posts/ title=Posts><span>Posts</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://pranjalgoyal.dev/ title=Portfolio><span>Portfolio</span>&nbsp;
<svg fill="none" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;¬ª&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Know your user like never before using Navigator API</h1><div class=post-description>‚ö° TL;DR A comprehensive guide to leveraging the Navigator API for collecting crucial user environment metrics like CPU heap size, RAM, network speed, and device info to enhance error tracking and performance monitoring in web applications.</div><div class=post-meta><span title='2024-08-08 14:53:12 +0530 IST'>August 8, 2024</span>&nbsp;¬∑&nbsp;4 min&nbsp;¬∑&nbsp;641 words</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents></nav></div></details></div><div class=post-content><h1 id=navigator-api---more-than-meets-the-eye>Navigator API - More than meets the Eye<a hidden class=anchor aria-hidden=true href=#navigator-api---more-than-meets-the-eye>#</a></h1><p><img alt="Navigator API present inside Chrome Dev" loading=lazy src=/images/chrome_dev.png></p><p>For those who don‚Äôt know, the Navigator API is a native API available in all browsers that provides user-centric metrics for your website. It offers insights into how your high-value site is performing. Some may use it to customize the interface for different platforms, such as displaying premium items to iOS users, but its main purpose is to understand how your code behaves across different user environments and internet speeds, including ping. This helps developers diagnose and recreate issues to solve them more effectively. The Navigator API also provides CPU heap statistics, which reveal how CSS effects impact users&rsquo; CPU threads.</p><p>By now, you might have a better understanding of what the Navigator API is and why it‚Äôs valuable. Let‚Äôs see how to incorporate it into your million dollar web app.</p><hr><p>For practical use‚Äîspecifically the task I was assigned‚Äîwe use Sentry for our app, which does an excellent job tracking errors. However, knowing about an error is only part of the story; additional information is crucial for effective troubleshooting. Key statistics like network speed at the time of the error, heap size, or RAM usage on the device are needed.</p><p>Let‚Äôs address the key aspects one by one:</p><ol><li><strong>Environment/Model - <code>navigator.userAgent</code></strong></li></ol><p>This is the most crucial information. It reveals details about the operating system on which the web page is being viewed, as well as key information about the manufacturer, platform, and web view version.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userAgent</span> <span class=o>=</span> <span class=nx>navigator</span><span class=p>.</span><span class=nx>userAgent</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>userAgent</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//console output
</span></span></span><span class=line><span class=cl><span class=c1>//      {
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;isVirtual&#34;: false,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;manufacturer&#34;: &#34;Google Inc.&#34;,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;model&#34;: &#34;Macintosh&#34;,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;operatingSystem&#34;: &#34;mac&#34;,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;osVersion&#34;: &#34;10.15.7&#34;,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;platform&#34;: &#34;web&#34;,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;webViewVersion&#34;: &#34;127.0.0.0&#34;
</span></span></span><span class=line><span class=cl><span class=c1>//       },
</span></span></span></code></pre></div><ol><li>CPU heap Size - ``</li></ol><p>The memory heap is the portion of memory allocated to the JavaScript runtime to store all objects, strings, and data structures. In simple terms, the more memory allocated, the more processing power your processor will need to handle the calculations and data management.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userCPUHeap</span> <span class=o>=</span> <span class=nx>performance</span><span class=p>.</span><span class=nx>memory</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>userCPUHeap</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//console output
</span></span></span><span class=line><span class=cl><span class=c1>//  {
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;totalJSHeapSize&#34;: 124342323 Bytes,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;totalJSHeapSize&#34;: 66605138 Bytes,
</span></span></span><span class=line><span class=cl><span class=c1>//         &#34;usedJSHeapSize&#34;: 51178854 Bytes,
</span></span></span><span class=line><span class=cl><span class=c1>//   },
</span></span></span></code></pre></div><ol><li>RAM</li></ol><p>This gives the at-least physical hardware RAM memory in GB of the user machine. Unlike JS heap size it value is is in range [2,3,4,8]. For devices greater than 8 this method with return 8 .</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userPhysicalRAM</span> <span class=o>=</span> <span class=nx>navigator</span><span class=p>.</span><span class=nx>deviceMemory</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>userPhysicalRAM</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>//console output
</span></span></span><span class=line><span class=cl><span class=c1>//  {
</span></span></span><span class=line><span class=cl><span class=c1>//  RAM: 8
</span></span></span><span class=line><span class=cl><span class=c1>//  }
</span></span></span></code></pre></div><ol><li>Network Stats</li></ol><p>If you want to measure the user&rsquo;s network speed while loading your website, this is a key statistic for tracking and monitoring your web vitals based on the user&rsquo;s average network speed. While one method is to download a test file of known size and measure the time taken for the operation, this approach can increase the app size and waste user resources.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-jsx data-lang=jsx><span class=line><span class=cl><span class=kr>const</span> <span class=nx>networkInfo</span> <span class=o>=</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;connection&#34;</span> <span class=k>in</span> <span class=nx>navigator</span>
</span></span><span class=line><span class=cl>    <span class=o>?</span> <span class=nx>navigator</span><span class=p>.</span><span class=nx>connection</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>      <span class=nx>navigator</span><span class=p>.</span><span class=nx>mozConnection</span> <span class=o>||</span>
</span></span><span class=line><span class=cl>      <span class=nx>navigator</span><span class=p>.</span><span class=nx>webkitConnection</span>
</span></span><span class=line><span class=cl>    <span class=o>:</span> <span class=kc>null</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kr>const</span> <span class=nx>userNetworkInfo</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nx>effectiveType</span><span class=o>:</span> <span class=nx>networkInfo</span> <span class=o>?</span> <span class=nx>networkInfo</span><span class=p>.</span><span class=nx>effectiveType</span> <span class=o>:</span> <span class=s2>&#34;Not available&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>downlink</span><span class=o>:</span> <span class=nx>networkInfo</span> <span class=o>?</span> <span class=nx>networkInfo</span><span class=p>.</span><span class=nx>downlink</span> <span class=o>:</span> <span class=s2>&#34;Not available&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>  <span class=nx>rtt</span><span class=o>:</span> <span class=nx>networkInfo</span> <span class=o>?</span> <span class=nx>networkInfo</span><span class=p>.</span><span class=nx>rtt</span> <span class=o>:</span> <span class=s2>&#34;Not available&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl><span class=p>};</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nx>console</span><span class=p>.</span><span class=nx>log</span><span class=p>(</span><span class=nx>userNetworkInfo</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>// Example console output
</span></span></span><span class=line><span class=cl><span class=c1>// {
</span></span></span><span class=line><span class=cl><span class=c1>//   effectiveType: &#39;4g&#39;, Network Type of user Wifi or Band
</span></span></span><span class=line><span class=cl><span class=c1>//   downlink: 10, This is the avg Speed calculated by Chrome
</span></span></span><span class=line><span class=cl><span class=c1>//   rtt: 50
</span></span></span><span class=line><span class=cl><span class=c1>// }
</span></span></span></code></pre></div><p>The <code>downlink</code> field provides the approximate bandwidth of the client&rsquo;s connection to the server, measured in Mbps, while the <code>RTT</code> field estimates the round-trip time in milliseconds (ms) for the network.</p><p>For practical purposes, these metrics are essential for tracking user performance. Remember to append this data to your Mixpanel events for comprehensive data analytics which we did in our systems.</p><p><strong>Alert üçé (For Apple enthusiasts):</strong> Due to privacy constraints, some API endpoints are not supported by Safari. This means you won‚Äôt be able to obtain certain information, such as network speed, RAM, or CPU heap size, as of now. Good luck with that! üòä</p></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/web-performance/>Web-Performance</a></li><li><a href=http://localhost:1313/tags/javascript/>Javascript</a></li><li><a href=http://localhost:1313/tags/web-vitals/>Web-Vitals</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/meta-pixel/><span class=title>¬´ Prev</span><br><span>The F Pixel by Meta</span>
</a><a class=next href=http://localhost:1313/posts/migrating-auth/><span class=title>Next ¬ª</span><br><span>Seamless Auth System Migration with Supertokens</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Pranjal's Blog</a></span> ¬∑
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>